@model Masjid 

@{
    ViewData["Title"] = "AddMasjid";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Add Masjid</h2>

<h6>Select the location of the masjid on the map to automatically input the co-ordinates</h6>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUs6gpwmJ8WRZXjIPQH-wyPEu_P2hdHo0&sensor=false"></script>

<div class="row">
    <div class="col-md-6">
        <div class="thumbnail">
            <div class="caption">
                <div id="map" style="height: 600px; width:100%"></div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="thumbnail">
            <div class="caption">
                <form asp-antiforgery="true" id="submitMasjidForm">
                    <fieldset class="form-group">
                        <label>Name</label>
                        <input type="text" asp-for="Name" placeholder="Enter Masjid Name" class="form-control typeahead" style="width:100% !important;" required />
                        <span asp-validation-for="Name" class="text-danger"></span>

                        <label>Town</label>
                        <input type="text" asp-for="Town" placeholder="Enter Masjid Town" class="form-control typeahead" style="width:100% !important;" required />
                        <span asp-validation-for="Town" class="text-danger"></span>

                        <label>Country</label>
                        <input type="text" asp-for="Country" placeholder="Enter Masjid Country" class="form-control typeahead" style="width:100% !important;" required />
                        <span asp-validation-for="Country" class="text-danger"></span>

                        <label>Physical Address</label>
                        <input type="text" asp-for="Address" placeholder="Enter Physical Address" class="form-control typeahead" style="width:100% !important;" required />
                        <span asp-validation-for="Address" class="text-danger"></span>

                        <label><input type="checkbox" asp-for="LadiesFacility"> Ladies Facility</label><br>

                        <label>Time Zone</label>
                        <input asp-for="TimeZone" type="number" class="form-control" value="0" placeholder="Time Zone" required autofocus>
                        <span asp-validation-for="TimeZone" class="text-danger"></span>

                        <label>Latitude</label>
                        <input asp-for="Latitude" name="inputLatitude" type="text" id="inputLatitude" class="form-control" placeholder="Latitude" required autofocus>
                        <span asp-validation-for="Latitude" class="text-danger"></span>

                        <label>Longitude</label>
                        <input asp-for="Longitude" name="inputLongitude" type="text" id="inputLongitude" class="form-control" placeholder="Longitude" required autofocus>
                        <span asp-validation-for="Longitude" class="text-danger"></span>
                    </fieldset>

                    <fieldset class="form-group">
                        <button class="btn btn-lg btn-primary btn-block" type="submit">Add Musjid</button>
                    </fieldset>
                </form>

            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
        var map;

        function load() {

            var map = new google.maps.Map(document.getElementById("map"), {

                center: new google.maps.LatLng(0, 0),

                zoom: 1,

                mapTypeId: 'roadmap'

            });

            var infoWindow = new google.maps.InfoWindow;

            geocoder = new google.maps.Geocoder();

            directionsDisplay = new google.maps.DirectionsRenderer();

            google.maps.event.addListener(map, 'click', function (event) {

                marker = new google.maps.Marker({ position: event.latLng, map: map });

                var lat = event.latLng.lat();

                var lng = event.latLng.lng();

                document.getElementById('inputLatitude').value = lat;

                document.getElementById('inputLongitude').value = lng;

            });
        }

        function doNothing() { }
</script>

<script>
    $(document).ready(function () {
        $("#home_nav").removeClass("active");
        $("#add_nav").addClass("active");
        load();
    });

    function submitMasjidForm() {
        if (!$("#submitMasjidForm").valid()) {
            return false;
        }

        $.ajax({
            type: 'post',
            url: '@Url.Action("","")',
            data: $("#submitMasjidForm").serialize(),
            success: function (data) {
                $("#submitMasjidForm").trigger('reset');
                $('#create_department_modal').modal('hide');
                createDepartmentTable();
            }
        })
    }
</script>